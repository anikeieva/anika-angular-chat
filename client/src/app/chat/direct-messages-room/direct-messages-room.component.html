<mat-card class="chat-room-container" layot="column">
  <mat-card-header class="chat-room__header">
    <img mat-card-avatar class="direct-messages-room__user-avatar" [src]="directRoomUser?.avatar || ''">
    <mat-card-title class="direct-messages-room__user-name">{{directRoomUser?.firstName}} {{directRoomUser?.lastName}}</mat-card-title>
    <mat-card-subtitle class="direct-messages-room__user-activity"
                       *ngIf="directRoomUser?.online">online</mat-card-subtitle>
    <mat-card-subtitle class="direct-messages-room__user-activity"
                       *ngIf="!directRoomUser?.online">last seen at {{directRoomUser?.lastSeen | date: 'h:mma' | lowercase}}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content class="chat-room-container__content" #chat_room_content>
    <div #messageList class="message-list">

      <div class="message-list-content">

        <div #messageListItem class="message-item" *ngFor="let message of messages"
             [ngClass]="[(message.from.id === user.id)? 'message-item__currentUser' : '']"
             (click)="getMessageManipulatingComponent(message)"
             [class.message-is-edited]="message.edited">

          <p class="mat-list-item-message">
            {{message.messageContent}}
          </p>

          <span class="message-item-time" *ngIf="message.action === 'sentMessage' && !message.edited">{{message.sendingTime | date: 'h:mma' | lowercase}}</span>
          <span class="message-item-time" *ngIf="message.action === 'sentMessage' && message.edited">edited {{message.sendingTime | date: 'h:mma' | lowercase}}</span>

        </div>

      </div>

    </div>
  </mat-card-content>
  <mat-card-footer class="chat-room-container-footer" #chat_room_footer>
    <div class="edit-message__container" *ngIf="isMessageRequestEdit && currentMessageEdit">
      <div class="edit-message__content">
        <mat-icon class="edit-message__cancel-button" (click)="cancelEditMessage()">cancel</mat-icon>
        <h4 class="edit-message__header">Edit message</h4>
        <p class="edit-message__message">{{currentMessageEdit.messageContent}}</p>
      </div>
    </div>
    <mat-icon class="chat-room-container-footer__icon">create</mat-icon>
    <mat-form-field class="message-input" [floatLabel]="'never'">
      <mat-label>Type a message...</mat-label>
      <textarea matInput mat-autosize (keyup.enter)="sendMessage(messageContent)" [(ngModel)]="messageContent"
                autofocus autocomplete="off" matAutosizeMinRows="2"></textarea>
    </mat-form-field>
    <button (click)="sendMessage(messageContent)" class="message-send-button">SEND</button>
  </mat-card-footer>
</mat-card>
